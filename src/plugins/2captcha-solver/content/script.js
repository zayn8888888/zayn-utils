Config['getAll']()['then'](function(a){const b=isBlockDomain(a['blackListDomain']);let c=[['content/core_helpers.js'],['content/communication_helpers.js']];if(a['isPluginEnabled']){c=[...c,['content/captcha/geetest/interceptor.js',a['enabledForGeetest']&&!b],['content/captcha/geetest_v4/interceptor.js',a['enabledForGeetest_v4']&&!b],['content/captcha/keycaptcha/hunter.js',!b],['content/captcha/recaptcha/hunter.js',a['enabledForRecaptchaV2']&&a['recaptchaV2Type']==='token'&&!b],['content/captcha/recaptcha/interceptor.js',(a['enabledForRecaptchaV2']||a['enabledForInvisibleRecaptchaV2']||a['enabledForRecaptchaV3'])&&!b],['content/captcha/recaptcha_audio/hunter.js',a['isPluginEnabled']&&a['enabledForRecaptchaAudio']&&!b],['content/captcha/arkoselabs/interceptor.js',a['enabledForArkoselabs']&&!b],['content/captcha/arkoselabs/hunter.js',!b],['content/captcha/lemin/interceptor.js',a['enabledForLemin']&&!b],['content/captcha/yandex/interceptor.js',a['enabledForYandex']&&!b],['content/captcha/amazon_waf/interceptor.js',a['enabledForAmazonWaf']&&!b],['content/captcha/turnstile/hunter.js',!b],['content/captcha/turnstile/interceptor.js',a['enabledForTurnstile']&&!b],['content/captcha/mt_captcha/interceptor.js',a['isPluginEnabled']&&a['enabledForMTCaptcha']&&!b]];}c['forEach'](d=>{if(d['length']>0x1&&!d[0x1])return;let e=document['createElement']('script');e['src']=chrome['runtime']['getURL'](d[0x0]);(document['head']||document['documentElement'])['prepend'](e);});});var CaptchaProcessors={'list':{},'register':function(a){this['list'][a['captchaType']]=a;},'get':function(a){return this['list'][a];}};let CAPTCHA_WIDGETS_LOOP=setInterval(function(){Config['getAll']()['then'](a=>{if(!a['isPluginEnabled'])return;if(a['apiKey']===null)return;if(isBlockDomain(a['blackListDomain']))return;$('head')['find']('captcha-widget')['each'](function(){let b=$(this);let c=prepareWidgetInfo(b[0x0]['dataset']);if(c['reset']){getSolverButton(c['captchaType'],c['widgetId'])['remove']();b['removeAttr']('data-loaded');b['removeAttr']('data-reset');}if(c['loaded'])return;let d=CaptchaProcessors['get'](c['captchaType']);if(d['canBeProcessed'](c,a)){let e=createSolverButton(c['captchaType'],c['widgetId'],a);if(a['buttonPosition']==='fixed'){$('body')['append'](e);}else{d['attachButton'](c,a,e);}if(typeof d['clickButton']==='function'){d['clickButton'](c,a,e);}b[0x0]['dataset']['loaded']=!![];const f=Config['mapParams'](d['getParams'](c,a),c['captchaType']);const g=d['getParamsV2'](c,a);const h=d['getName'](c,a);background['postMessage']({'name':'update','command':'2captcha-devtools','data':{'captchaType':c['captchaType'],'captchaName':h,'params':{'key':a['apiKey'],'method':c['captchaType'],...f,'json':0x1},'params_v2':{'clientKey':a['apiKey'],'task':g}}},'*');}});});},0x7d0);var background=chrome['runtime']['connect']({'name':'content'});background['onMessage']['addListener'](function(a){if(a['action']==='solve'){if(a['request']['messageId']){return respondToWebPageMessage(a);}let b=getSolverButton(a['request']['captchaType'],a['request']['widgetId']);if(a['error']===undefined){changeSolverButtonState(b,'solved',chrome['i18n']['getMessage']('solved'));doActionsOnSuccess(a);}else{changeSolverButtonState(b,'error',a['error']);tryAgain(b);}}});background['onDisconnect']['addListener'](function(a){clearInterval(CAPTCHA_WIDGETS_LOOP);});function doActionsOnSuccess(a){let b=getWidgetInfo(a['request']['captchaType'],a['request']['widgetId']);let c=CaptchaProcessors['get'](a['request']['captchaType']);Config['getAll']()['then'](d=>{c['onSolved'](b,a['response']['code'],d);let e=c['getCallback'](b);if(e){let f=document['createElement']('textarea');f['id']='twcpt-callback-trigger';f['setAttribute']('data-function',e);f['value']=a['response']['code'];document['body']['appendChild'](f);}if(d['autoSubmitForms']===!![]){let g=parseInt(d['submitFormsDelay'])*0x3e8;setTimeout(function(){if(!executeAutoSubmitRule(d['autoSubmitRules'])){c['getForm'](b)['submit']();}},g);}});}function isBlockDomain(a){const b=a['split']('\x0a')||[];for(let c=0x0;c<b['length'];c++){if(b[c]){const d=new RegExp(b[c],'i');if(d['test'](location['href'])){return!![];}}}return![];}function executeAutoSubmitRule(a){for(let b=0x0;b<a['length'];b++){let c=new RegExp(a[b]['url_pattern']);if(c['test'](location['href'])){let d=document['createElement']('textarea');d['id']='twcpt-autosubmit-code';d['value']=a[b]['code'];document['body']['appendChild'](d);return!![];}}return![];}function executeAutoSubmitRuleCode(a){}function tryAgain(a){Config['getAll']()['then'](b=>{let c=parseInt(a[0x0]['dataset']['countErrors']||0x0);if(b['repeatOnErrorTimes']>=c){setTimeout(function(){a['click']();},b['repeatOnErrorDelay']*0x3e8);}});}function attachProxyParams(a,b){if(!b['useProxy'])return;let c=b['proxy']['trim']();if(!c['length'])return;a['proxy']={'type':b['proxytype'],'uri':c};}function createSolverButton(a,b,c){let d=$('\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22captcha-solver\x20captcha-solver_'+c['buttonPosition']+'\x22\x20data-state=\x22ready\x22\x20data-captcha-type=\x22'+a+'\x22\x20data-widget-id=\x22'+b+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22captcha-solver-image\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+chrome['runtime']['getURL']('assets/images/icon_32.png')+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22captcha-solver-info\x22>'+chrome['i18n']['getMessage']('solveWith2Captcha')+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20');d['click'](function(){if(!['ready','error']['includes'](d['attr']('data-state')))return;if(d[0x0]['dataset']['countErrors']&&d[0x0]['dataset']['disposable']){return changeSolverButtonState(d,'error','EXPIRED');}changeSolverButtonState(d,'solving',chrome['i18n']['getMessage']('solving'));let e=getWidgetInfo(a,b);Config['getAll']()['then'](function(f){let g=CaptchaProcessors['get'](a)['getParams'](e,f);attachProxyParams(g,f);background['postMessage']({'action':'solve','captchaType':a,'widgetId':b,'params':g});});});return d;}function changeSolverButtonState(a,b,c){a['attr']('data-state',b);a['find']('.captcha-solver-info')['text'](c);if(b==='error'){a[0x0]['dataset']['countErrors']=parseInt(a[0x0]['dataset']['countErrors']||0x0)+0x1;}}function getSolverButton(a,b){return $('.captcha-solver[data-captcha-type='+a+'][data-widget-id='+b+']');}function getWidgetInfo(a,b){let c=$('head')['find']('captcha-widget[data-captcha-type='+a+'][data-widget-id='+b+']');if(!c['length'])return null;return prepareWidgetInfo(c[0x0]['dataset']);}function prepareWidgetInfo(a){let b={};for(let c in a){b[c]=a[c];if(b[c]==='null')b[c]=null;if(b[c]==='false')b[c]=![];if(b[c]==='true')b[c]=!![];}return b;}let webPageMsgInterval=setInterval(function(){$('body\x20>\x20solver-ext-messages')['children']()['each'](function(){let a=$(this)[0x0];if(!a['dataset']['received']){a['dataset']['received']=!![];if(a['dataset']['action']==='getConfig'){Config['getAll']()['then'](b=>{setWebPageMessageResponse(a,b);})['catch'](b=>{setWebPageMessageResponse(a,{'error':b['message']});});}else if(a['dataset']['action']==='solve'){let b=JSON['parse'](decodeURIComponent(a['dataset']['data']));background['postMessage']({'action':'solve','captchaType':b['captchaType'],'widgetId':b['widgetId'],'params':b['params'],'messageId':a['dataset']['messageId']});}else if(a['dataset']['action']==='getRecaptchaV3InterceptorInfo'){setWebPageMessageResponse(a,{'extId':chrome['runtime']['id'],'i18n':{'solving':chrome['i18n']['getMessage']('solving'),'solved':chrome['i18n']['getMessage']('solved')}});}else{setWebPageMessageResponse(a,{'error':'unknown_action'});}}});},0xc8);function respondToWebPageMessage(a){let b=$('body\x20>\x20solver-ext-messages\x20>\x20solver-ext-message[data-message-id='+a['request']['messageId']+']');if(!b['length'])return;if(a['error']){setWebPageMessageResponse(b[0x0],{'error':a['error']});}else{setWebPageMessageResponse(b[0x0],{'response':a['response']['code']});}}function setWebPageMessageResponse(a,b){a['dataset']['response']=encodeURIComponent(JSON['stringify'](b));}let contextMenuEl=null;document['addEventListener']('contextmenu',function(a){contextMenuEl=a['target'];},!![]);chrome['runtime']['onMessage']['addListener'](function(a,b,c){if(a['command']=='getContextMenuEl'){c({'xpath':getXPath(contextMenuEl)});if(a['element']=='input'){$('.twcpt-toast\x20.close')['click']();}else if(a['showManual']){showToast(chrome['i18n']['getMessage']('normalManual'));}}});function showToast(a){if(!$('body\x20>\x20.twcpt-toast-container')['length']){$('body')['append']('<div\x20class=\x22twcpt-toast-container\x22></div>');}let b=$('\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22twcpt-toast\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+chrome['runtime']['getURL']('assets/images/logo.svg')+'\x22\x20class=\x22twcpt-toast-logo\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22close\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22twcpt-toast-message\x22>'+a+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20')['appendTo']('.twcpt-toast-container');setTimeout(function(){b['addClass']('visible');},0x32);b['find']('button.close')['click'](function(c){b['removeClass']('visible');setTimeout(function(){b['remove']();},0x12c);});}function getXPath(a){var b,c=[];var d='';var e=function(g){var h=0x1,j;if(g['nodeType']==Node['ATTRIBUTE_NODE']){return null;}for(j=g['previousSibling'];j;j=j['previousSibling']){if(j['nodeName']==g['nodeName']){++h;}}return h;};if(a instanceof Document){return'/';}for(;a&&!(a instanceof Document);a=a['nodeType']==Node['ATTRIBUTE_NODE']?a['ownerElement']:a['parentNode']){b=c[c['length']]={};switch(a['nodeType']){case Node['TEXT_NODE']:b['name']='text()';break;case Node['ATTRIBUTE_NODE']:b['name']='@'+a['nodeName'];break;case Node['PROCESSING_INSTRUCTION_NODE']:b['name']='processing-instruction()';break;case Node['COMMENT_NODE']:b['name']='comment()';break;case Node['ELEMENT_NODE']:b['name']=a['nodeName'];break;}b['position']=e(a);}for(var f=c['length']-0x1;f>=0x0;f--){b=c[f];d+='/'+b['name'];if(b['position']!=null){d+='['+b['position']+']';}}return d;}