Config['getAll']()['then'](a=>{var b=$('#config-form');b['find']('input[name=api_key]')['val'](a['api_key']);for(let c in a){let d=$('[name='+c+']');let e=a[c];if(!d['length'])continue;if(d['is']('[type=text]')||d['is']('select')||d['is']('textarea')){d['val'](e);}if(d['is']('[type=checkbox]')){d['prop']('checked',e);}d['closest']('.custom-select')['find']('.custom-select-value')['text'](e);}$('.container')['attr']('style','');$('.version')['text']('v'+chrome['runtime']['getManifest']()['version']);});$('#config-form')['on']('keyup\x20change','input,select,textarea',function(){let a=$(this)['attr']('name');let b=$(this)['val']();if($(this)['is']('[type=checkbox]')){b=$(this)['is'](':checked');}let c=$(this)['attr']('data-type');if(c=='int')b=parseInt(b)||0x0;if(c=='float')b=parseFloat(b)||0x0;let d={};d[a]=b;Config['set'](d);});var connectBtn=$('#connect');connectBtn['click'](function(a){a['preventDefault']();connectBtn['attr']('data-text',connectBtn['text']());connectBtn['html']('<img\x20src=\x22/assets/images/loader_dark.gif\x22>');let b=$('input[name=apiKey]')['val']();background['postMessage']({'action':'login','apiKey':b});});var background=chrome['runtime']['connect']({'name':'popup'});background['onMessage']['addListener'](function(a){if(a['action']=='login'){if(a['error']===undefined){alert(chrome['i18n']['getMessage']('accountSuccessfullyConnected'));}else{alert(a['error']);}connectBtn['text'](connectBtn['attr']('data-text'));}});$('.custom-select-label')['click'](function(a){let b=$(this)['parent']();$('.custom-select')['not']($(this)['parent']()[0x0])['removeClass']('open');b['toggleClass']('open');});$('.custom-select-dropdown-field\x20button')['click'](function(a){a['preventDefault']();let b=$(this)['closest']('.custom-select');let c=$(this)['parent']()['find']('input')['val']();b['find']('.custom-select-value')['text'](c);b['removeClass']('open');});$('.custom-select-dropdown-value')['click'](function(){$(this)['parent']()['find']('input')['val']($(this)['attr']('data-value'))['change']();$(this)['parent']()['find']('button')['click']();});function displayAutoSubmitRules(){Config['get']('autoSubmitRules')['then'](a=>{let b='';a['forEach'](function(c,d){b+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr\x20data-index=\x22'+d+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22text-align:\x20left\x22>'+c['url_pattern']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-rule\x22>'+chrome['i18n']['getMessage']('edit')+'</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-rule\x22>'+chrome['i18n']['getMessage']('delete')+'</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';});$('#autosubmit-rules\x20.content')['html']('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<table\x20class=\x22config\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+b+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr'+(a['length']?'\x20class=\x22d-none\x22':'')+'>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+chrome['i18n']['getMessage']('autoSubmitNoRules')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22default-btn\x20new-rule\x22>'+chrome['i18n']['getMessage']('autoSubmitCreateNewRule')+'</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20');});}displayAutoSubmitRules();$('#autosubmit-rules')['on']('click','.new-rule',function(a){a['preventDefault']();let b=$(this)['closest']('tr')['prev']();if($('#autosubmit-rules\x20.rule-form')['length']){return alert(chrome['i18n']['getMessage']('autoSubmitAlertFormOpened'));}b['addClass']('d-none');b['before'](renderRuleForm());});function renderRuleForm(){return'\x0a\x20\x20\x20\x20\x20\x20\x20\x20<tr\x20class=\x22rule-form\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x223\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22hidden\x22\x20name=\x22index\x22\x20value=\x22-1\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22text\x22\x20name=\x22url_pattern\x22\x20style=\x22margin-bottom:\x208px;\x22\x20placeholder=\x22'+chrome['i18n']['getMessage']('autoSubmitPlaceholderUrl')+'\x20site.com\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20name=\x22code\x22\x20rows=\x224\x22\x20placeholder=\x27'+chrome['i18n']['getMessage']('autoSubmitPlaceholderCode')+'&#10;{\x22type\x22:\x22source\x22,\x22value\x22:\x22document\x22}&#10;{\x22type\x22:\x22method\x22,\x22value\x22:\x22querySelector\x22,\x22args\x22:[\x22#submit-button\x22]}&#10;{\x22type\x22:\x22method\x22,\x22value\x22:\x22click\x22}\x27></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22default-btn\x20save-rule\x22\x20style=\x22margin-right:\x205px;\x22>'+chrome['i18n']['getMessage']('save')+'</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22default-btn\x20cancel\x22>'+chrome['i18n']['getMessage']('cancel')+'</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20';}$('#autosubmit-rules')['on']('click','.save-rule',function(a){a['preventDefault']();let b=$(this)['closest']('tr');let c=parseInt(b['find']('input[name=index]')['val']());let d={'url_pattern':b['find']('input[name=url_pattern]')['val'](),'code':b['find']('textarea')['val']()};if(!d['url_pattern']['length'])return alert(chrome['i18n']['getMessage']('autoSubmitAlertUrlRequired'));try{new RegExp(d['url_pattern']);}catch(f){return alert(chrome['i18n']['getMessage']('autoSubmitAlertUrlInvalid'));}if(!d['code']['length'])return alert(chrome['i18n']['getMessage']('autoSubmitAlertCodeRequired'));Config['get']('autoSubmitRules')['then'](g=>{if(!g)g=[];if(c==-0x1){g['push'](d);}else{g[c]=d;}Config['set']({'autoSubmitRules':g})['then'](displayAutoSubmitRules);});});$('#autosubmit-rules')['on']('click','.cancel',function(a){a['preventDefault']();displayAutoSubmitRules();});$('#autosubmit-rules')['on']('click','.edit-rule',function(a){a['preventDefault']();let b=parseInt($(this)['closest']('tr')['attr']('data-index'));if($('#autosubmit-rules\x20.rule-form')['length']){return alert(chrome['i18n']['getMessage']('autoSubmitAlertFormOpened'));}$('#autosubmit-rules\x20tr[data-index='+b+']')['replaceWith'](renderRuleForm());Config['get']('autoSubmitRules')['then'](c=>{let d=$('#autosubmit-rules\x20.rule-form');d['find']('input[name=index]')['val'](b);d['find']('input[name=url_pattern]')['val'](c[b]['url_pattern']);d['find']('textarea')['val'](c[b]['code']);});});$('#autosubmit-rules')['on']('click','.delete-rule',function(a){a['preventDefault']();let b=parseInt($(this)['closest']('tr')['attr']('data-index'));let c=$(this)['closest']('tr')['children']()['first']()['text']();if(!confirm(chrome['i18n']['getMessage']('autoSubmitConfirmDelete')+'\x20\x22'+c+'\x22?'))return;Config['get']('autoSubmitRules')['then'](d=>{let f=[];for(let g=0x0;g<d['length'];g++){if(g!=b){f['push'](d[g]);}}Config['set']({'autoSubmitRules':f})['then'](displayAutoSubmitRules);});});setTimeout(function(){if(location['href']['endsWith']('#autosubmit-rules')){$([document['documentElement'],document['body']])['animate']({'scrollTop':$('#autosubmit-rules')['offset']()['top']},0x3e8);}},0x190);